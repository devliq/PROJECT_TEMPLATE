{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended",
    ":dependencyDashboard",
    ":semanticPrefixFixDepsChoreOthers",
    ":ignoreUnstable",
    "group:monorepos",
    "group:recommended",
    "workarounds:all"
  ],
  "managers": [
    {
      "manager": "poetry",
      "fileMatch": ["pyproject.toml"]
    },
    {
      "manager": "docker",
      "fileMatch": ["Dockerfile", "docker-compose.yml"]
    },
    {
      "manager": "terraform",
      "fileMatch": ["deploy/terraform/main.tf"]
    },
    {
      "manager": "nix",
      "fileMatch": ["flake.nix", "shell.nix"]
    }
  ],
  "schedule": ["before 4am on Monday"],
  "timezone": "America/New_York",
  "labels": ["dependencies"],
  "assignees": ["@me"],
  "reviewers": ["team:maintainers"],
  "packageRules": [
    {
      "description": "Group npm patch updates",
      "matchManagers": ["npm"],
      "matchUpdateTypes": ["patch"],
      "groupName": "npm patch updates",
      "automerge": true,
      "automergeType": "pr"
    },
    {
      "description": "Group npm minor updates",
      "matchManagers": ["npm"],
      "matchUpdateTypes": ["minor"],
      "groupName": "npm minor updates",
      "automerge": true,
      "automergeType": "pr"
    },
    {
      "description": "Group npm major updates separately",
      "matchManagers": ["npm"],
      "matchUpdateTypes": ["major"],
      "groupName": "npm major updates",
      "labels": ["dependencies", "major-update"]
    },
    {
      "description": "Group pip patch updates",
      "matchManagers": ["pip", "setuptools"],
      "matchUpdateTypes": ["patch"],
      "groupName": "pip patch updates",
      "automerge": true,
      "automergeType": "pr"
    },
    {
      "description": "Group pip minor updates",
      "matchManagers": ["pip", "setuptools"],
      "matchUpdateTypes": ["minor"],
      "groupName": "pip minor updates",
      "automerge": true,
      "automergeType": "pr"
    },
    {
      "description": "Group pip major updates separately",
      "matchManagers": ["pip", "setuptools"],
      "matchUpdateTypes": ["major"],
      "groupName": "pip major updates",
      "labels": ["dependencies", "major-update"]
    },
    {
      "description": "Group GitHub Actions patch updates",
      "matchManagers": ["github-actions"],
      "matchUpdateTypes": ["patch"],
      "groupName": "GitHub Actions patch updates",
      "automerge": true,
      "automergeType": "pr"
    },
    {
      "description": "Group GitHub Actions minor updates",
      "matchManagers": ["github-actions"],
      "matchUpdateTypes": ["minor"],
      "groupName": "GitHub Actions minor updates"
    },
    {
      "description": "Group GitHub Actions major updates separately",
      "matchManagers": ["github-actions"],
      "matchUpdateTypes": ["major"],
      "groupName": "GitHub Actions major updates",
      "labels": ["dependencies", "major-update", "github-actions"]
    },
    {
      "description": "Respect Node.js engine requirements",
      "matchManagers": ["npm"],
      "matchPackageNames": ["node"],
      "allowedVersions": ">=20.17.0"
    },
    {
      "description": "Security updates - high priority",
      "matchUpdateTypes": ["patch"],
      "matchDatasources": ["npm", "pypi"],
      "labels": ["security", "high-priority"],
      "automerge": true
    },
    {
      "description": "Group poetry patch updates",
      "matchManagers": ["poetry"],
      "matchUpdateTypes": ["patch"],
      "groupName": "poetry patch updates",
      "automerge": true,
      "automergeType": "pr"
    },
    {
      "description": "Group poetry minor updates",
      "matchManagers": ["poetry"],
      "matchUpdateTypes": ["minor"],
      "groupName": "poetry minor updates",
      "automerge": true,
      "automergeType": "pr"
    },
    {
      "description": "Group poetry major updates separately",
      "matchManagers": ["poetry"],
      "matchUpdateTypes": ["major"],
      "groupName": "poetry major updates",
      "labels": ["dependencies", "major-update"]
    },
    {
      "description": "Group docker patch updates",
      "matchManagers": ["docker"],
      "matchUpdateTypes": ["patch"],
      "groupName": "docker patch updates",
      "automerge": true,
      "automergeType": "pr"
    },
    {
      "description": "Group docker minor updates",
      "matchManagers": ["docker"],
      "matchUpdateTypes": ["minor"],
      "groupName": "docker minor updates",
      "automerge": true,
      "automergeType": "pr"
    },
    {
      "description": "Group docker major updates separately",
      "matchManagers": ["docker"],
      "matchUpdateTypes": ["major"],
      "groupName": "docker major updates",
      "labels": ["dependencies", "major-update"]
    },
    {
      "description": "Group terraform patch updates",
      "matchManagers": ["terraform"],
      "matchUpdateTypes": ["patch"],
      "groupName": "terraform patch updates",
      "automerge": true,
      "automergeType": "pr"
    },
    {
      "description": "Group terraform minor updates",
      "matchManagers": ["terraform"],
      "matchUpdateTypes": ["minor"],
      "groupName": "terraform minor updates",
      "automerge": true,
      "automergeType": "pr"
    },
    {
      "description": "Group terraform major updates separately",
      "matchManagers": ["terraform"],
      "matchUpdateTypes": ["major"],
      "groupName": "terraform major updates",
      "labels": ["dependencies", "major-update"]
    },
    {
      "description": "Group nix patch updates",
      "matchManagers": ["nix"],
      "matchUpdateTypes": ["patch"],
      "groupName": "nix patch updates",
      "automerge": true,
      "automergeType": "pr"
    },
    {
      "description": "Group nix minor updates",
      "matchManagers": ["nix"],
      "matchUpdateTypes": ["minor"],
      "groupName": "nix minor updates",
      "automerge": true,
      "automergeType": "pr"
    },
    {
      "description": "Group nix major updates separately",
      "matchManagers": ["nix"],
      "matchUpdateTypes": ["major"],
      "groupName": "nix major updates",
      "labels": ["dependencies", "major-update"]
    }
  ],
  "vulnerabilityAlerts": {
    "enabled": true
  },
  "osvVulnerabilityAlerts": true,
  "lockFileMaintenance": {
    "enabled": true,
    "schedule": ["before 4am on Monday"]
  },
  "prHourlyLimit": 2,
  "prConcurrentLimit": 10,
  "branchPrefix": "renovate/",
  "commitMessagePrefix": "chore(deps): ",
  "semanticCommits": "enabled",
  "separateMinorPatch": true,
  "rangeStrategy": "bump"
}
